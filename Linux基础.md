# Linux

## 基础知识

### alias - 别名

部分指令有别名

```
alias	 : 查看系统默认命令别名
```

### 绝对/相对路径

- 绝对路径 :  路径从根目录开始
- 相对路径 :  路径不从根目录开始

### 通配符

\* 是一种通配符，可以匹配任意长度的任意字符，包括空字符。这种用法常常配合ls、find、cp、mv等命令使用，用于更方便地指定一组文件或目录，而不需要逐一列出它们的名称。例如，\*.txt可以匹配所有以.txt结尾的文件，a\*可以匹配所有以a开头的文件或目录，\*a\*可以匹配所有包含a的文件或目录。

### 目录结构

- /dev  存放抽象硬件
- /lib  存放系统库文件
- /sbin  存放特权级二进制文件
- /var  存放变量文件
- /home  普通用户目录
- /etc 存放配置文件目录
- /boot  存放内核与启动文件
- /bin  存放二进制文件（可执行命令）
- /usr  存放安装程序（软件默认目录）
- /mnt 文件挂载目录（U盘、光驱）
- /root  特权用户目录
- /opt  大型软件存放目录（非强制）

### 重要配置文件

```
/etc/
/etc/sysconfig/network-script/ifcfg-[网卡名称] : 网卡配置文件
/etc/resolv.conf : DNS客户端配置文件
/etc/fstab : 配置开机设备自动挂载的文件
/etc/rc.local : 存放开机自启动程序命令的文件
/etc/inittab : 系统启动设定运行级别等配置的文件
/etc/profile : 配置系统环境变量的文件
/etc/bashrc : 配置别名的文件
/etc/profile.d : 用户登录后执行的脚本所在目录
/etc/init.d ： 软件启动程序所在的目录(centos 6)
/usr/lib/systemd/system ： 软件启动程序所在的目录(centos 7)
/etc/hostname : 主机名文件
/etc/hosts : 系统本地DNS解析文件
/etc/motd : 用户登录系统问候文本文件
/etc/os-relaease : 系统版本信息
/etc/sysctl.conf : Linux内核参数设置文件
```

```
/proc/
/proc/meminfo : 系统内存信息
/proc/cpuinfo : 系统处理器的信息
/proc/loadavg : 系统负载信息，uptime的结果
/proc/mounts : 已加载的文件系统的列表
```

```
/var/
/var/log : 系统及软件运行信息文件日志目录
/var/log/messages : 系统级别日志文件
/var/log/secure : 用户登录信息日志文件
/var/log/dmesg : 记录硬件信息加载清空的日志文件
```

### 环境变量

环境变量是用于存储系统配置和用户设置的重要机制。允许程序和系统命令访问和修改这些设置。

```
echo $Path	 : 打印全局环境变量
```



## 基础命令

### tip : options简写

```
options可以简写
例如: ls -h -a  === ls-ah
```

### cd

change directory（更改目录）

```
cd (目录)

特殊目录:
.   : 当前工作目录
..  : 上一级的工作目录
-   : 上一次的工作目录
~   : 当前系统登录的用户home目录
```

### ls

list（列表）

列出文件夹中的内容

```
ls [option] (目录文件夹)

options:
-a   ：列出所有文件以及信息，包括隐藏文件
-l   : 详细列出文件夹中的内容
-h   : 列出文件信息，但是文件大小有单位
--full-time  : 以完整的时间格式列出信息
-t   : 根据最后修改时间排序列出的文件（降序）

-F   : 在列出的文件结尾标记特殊符号
	/ 结尾为文件夹
	* 结尾为可执行文件
	@ 结尾为软连接（快捷方式）
	结尾为空则为普通文件类型
	
-d   : 显示当前所在文件夹的信息，不会列出文件
-r   : reverse 逆转排序
-S   : 针对文件大小进行排序（降序）
-i   : 显示出文件的inode信息
```

### pwd

print work directory（打印工作目录）

输出当前所处的工作目录的绝对路径

```
pwd
```

### mkdir

make directory（创建目录）

```
mkdir [options] (目录)

options:
-p	 : 递归创建目录，会逐层创建目录

目录：
{目录1,目录2,...,目录n}	 : 同时创建多个平级目录
例如: mkdir {dirBz,dirZz}

目录1 目录2 ... 目录n	 : 同时创建多个平级目录（空格间隔）
例如: mkdir dirBz dirZz

目录名称{序号..序号}	 ： bash脚本创建多个平级目录
序号:阿拉伯数字、大小写字母
例如: mkdir dir{1..3}
	 mkdir dir{a..z}
	 mkdir dir{A..Z}
```

### touch

```
touch 别名为 touch -i
```

创建文件或更新时间戳

```
touch [options] (文件名)

options:
无参数	 : 若文件存在则 更新时间戳;不存在则 创建文件;
-c	 : 若文件存在则 更新时间戳;不存在则 无动作; -c 的目的是阻止创建文件
-t	 : 更新为自定义的时间戳，格式为:[[CC]YY]MMDDhhmm[.ss]省略世纪数（CC），则默认使用当前世纪的年份。省略了秒数（.ss），则秒数会被设置为0
-r	 : 将B文件时间戳设置为A文件的时间戳，若B文件不存在则无操作
	例如:touch -r A B
-i	 : 覆盖文件前询问

目录：
{目录1,目录2,...,目录n}	 : 同时创建多个平级目录
例如: touch {fileAz,fileZz}

目录1 目录2 ... 目录n	 : 同时创建多个平级目录（空格间隔）
例如: touch fileBz fileZz

目录名称{序号..序号}	 ： bash脚本创建多个平级目录
序号:阿拉伯数字、大小写字母
例如: touch file{1..3}
	 touch file{a..z}
	 touch file{A..Z}
```

### cp

```
cp 别名为 cp -i
```

copy（复制普通文件或文件夹）

```
cp [options] ([路径]被复制文件名) ([路径][复制后文件名])

options:
-r	 : 递归操作复制文件夹
	cp ([路径][被复制文件夹]) ([路径][复制后文件夹])

-p	 : 拷贝后的文件或文件夹保持属性不变
-d	 : 拷贝文件保持属性不变（软连接）
-i	 : 覆盖文件前询问

复制多个文件到指定路径
cp ([路径]被复制文件名) [[路径]被复制文件名] ... ([存放至此路径])
```

- 可指定目录里的文件复制
- 复制后文件可指定路径
- 复制后文件不重命名则用原名

### mv

```
mv 别名为 mv -i
```

move 移动或重命名目录和文件

```
mv [options] (文件) (文件) - 重命名
mv [options] (目录) (目录，不带斜杠/) - 重命名
mv [options] (目录\文件) [目录\文件] (目标目录，必须带斜杠/) - 移动或多个移动

options:
-f	 : (force)强制覆盖目标文件，覆盖操作不询问
-i	 : 交互式操作模式。覆盖操作进行询问
-v	 : (verbose)显示详细操作信息，即操作过程
-u	 : (update)只在目标文件或目录比源文件或目录新或不存在时才进行移动或重命名操作，确保不会覆盖更新的文件
-t (目标目录) (多个源文件) : 将多个源文件移动到目标目录中，可以使用-t可以明确地看到所有要移动的文件或目录都被列在一起
-n	 : 不要覆盖任何已存在的文件或目录
-p	 : 保留其原始的时间戳和其他属性
```

### rm

```
rm 别名为 rm-i
```

remove 删除目录或文件

```
rm [options] (目录/文件) [目录/文件]

options:
-f	 : (force)强制覆盖目标文件，覆盖操作不询问
-i	 : 交互式操作模式。覆盖操作进行询问
-r	 : 递归删除，用于删除目录，目录不为空会进入目录中询问是否删除内文件
-R	 : 递归删除，用于删除目录，目录不为空会进入目录中询问是否删除内文件
-d	 : 只能用于删除空目录，防止误操作
-v	 : (verbose)显示详细操作信息，即操作过程
```

### --help

帮助信息

```
(命令名) --help	 : 显示此命令帮助并退出
```

### man

命令使用文档

```
man (命令名)	 : 查看此命令的使用文档
```

### help

命令使用文档

```
help (命令名)	 : 查看此命令的使用文档
```

### --version

查询该工具的版本信息

```
(工具名) --version	 : 查询该工具的版本信息
bash、git、node、npm等支持查询版本的工具
```

### su

switch user（切换用户）

```
su - [用户名]   : 完全的环境变量用户切换
```

### shutdown

关机或重启

```
shutdown [options] [time] [Wall...]

options:
-r	 : (reboot)重启
-h	 : (halt)关机

time:	(分钟)
	1、0分钟为立刻执行，等同 now
	2、指定时间:(hh:mm)
```

### reboot

立刻重启

```
reboot	 : 立刻重启
```

### halt

立刻关闭系统，需要手动切断电源

```
halt	 : 立刻关闭系统
```

### poweroff

立刻关闭系统，并切断电源

```
poweroff	: 立刻关闭系统，并切断电源
```

### init

切换运行级别

```
init [Run level]

Run level:
0	 : 关闭系统
1	 : 单用户模式（root用户可使用）
2	 : 多用户模式，没有NFS（网络文件系统）
3	 : 完全多用户模式（最常用的运行级别）
4	 : 未使用，通常保留给用户
5	 : 图形界面（如使用GNOME,KDE等）
6	 : 重启
```

### logout

login out（登出）

注销退出当前系统用户

```
logout
```

### exit

注销退出当前系统用户，快捷键 ctrl+d

```
exit	: 快捷键ctrl+d
```

## 基础快捷键

```
ctrl+c	 : cancel取消当前操作
ctrl+l	 : 清空屏幕内容
ctrl+d	 : 退出当前用户
ctrl+a	 : 光标移动到行首
ctrl+e	 : 光标移动到行尾
ctrl+u	 : 删除从光标到行首的内容
```

## vim编辑器

```
启动vim:

vim (文件名)	 : 文件不存在则创建文件
```

#### vim模式:

- **正常模式（Normal mode）**：默认模式，可以执行复制、粘贴、剪切、查找、替换等操作。
- **插入模式（Insert mode）**：可以插入文本。从正常模式进入插入模式可以使用 `i`（在当前字符前插入）、`a`（在当前字符后插入）、`o`（在当前行下方新开一行）等命令。
- **可视模式（Visual mode）**：可以选择文本块。从正常模式进入可视模式可以使用 `v`（选择字符）、`V`（选择行）或 `Ctrl + v`（选择块）。
- **命令模式（Command mode）**：执行保存、退出等命令。从正常模式进入命令模式可以输入 `:`（冒号）。



#### 基本操作: （命令模式）

- **保存并退出**：在正常模式下输入 `:wq` 或 `ZZ`。
- **不保存退出**：在正常模式下输入 `:q!`。
- **查找**：在正常模式下输入 `/pattern` 查找字符串 `pattern`，按 `n` 查找下一个，按 `N` 查找上一个。
- **替换**：在正常模式下输入 `:s/old/new/g` 替换当前行的第一个 `old` 为 `new`，如果要替换整个文件的 `old` 为 `new`，可以输入 `:%s/old/new/g`。
- **撤销**：在正常模式下输入 `u` 撤销上一步操作。
- **重做**：在正常模式下输入 `Ctrl + r` 重做被撤销的操作。
- **强制执行**: ! (叹号)



#### 快捷键: (正常模式)

- `i`：插入模式，在当前字符前插入文本。
- `a`：插入模式，在当前字符后插入文本。
- `o`：在当前行下方新开一行并进入插入模式。
- `dd`：删除当前行。
- `yy`：复制当前行。
- `p`：粘贴（在当前行下方粘贴为 `p`，在当前行上方粘贴为 `P`）。
- `x`：删除当前字符。
- `h`、`j`、`k`、`l`：分别向左、向下、向上、向右移动一个字符。
- `w`：向前移动一个单词。
- `b`：向后移动一个单词。
- `gg`：跳转到文件的第一行。
- `G`：跳转到文件的最后一行。
- `nG`：跳转到文件的第 `n` 行（`n` 为数字）。
- `Ctrl + f`：向前翻页。
- `Ctrl + b`：向后翻页。
- `v`：进入可视模式，选择字符。
- `V`：进入可视模式，选择行。
- `Ctrl + v`：进入可视模式，选择块。
- `:`：进入命令模式。

#### 交换文件

在 Vim 中，"交换文件"（swap file）是一个用于在编辑过程中保存恢复信息的临时文件。当你编辑一个文件时，Vim 可能会创建一个与编辑文件相关联的 `.swp` 文件（在某些配置中可能是其他扩展名，但 `.swp` 是最常见的）。这个 `.swp` 文件用于在 Vim 异常退出（如崩溃、系统重启等）时恢复编辑的会话。



#### **处理交换文件冲突:**

如果 Vim 检测到另一个 Vim 实例正在编辑同一个文件（通过 `.swp` 文件），它会显示一个警告并询问你如何处理。你可以选择编辑文件（如果另一个 Vim 实例已经正常退出）、恢复文件（从 `.swp` 文件中恢复）、删除 `.swp` 文件（并可能丢失另一个 Vim 实例中的更改）或放弃编辑。



#### **恢复文件:**

会将交换文件的数据恢复到源文件中

```
vim -r filename.txt.swp
```



#### **手动删除交换文件:**

如果你确定不再需要某个 `.swp` 文件（例如，因为对应的 Vim 会话已经正常退出），你可以手动删除它。但是，在删除之前，请确保没有其他 Vim 实例正在编辑该文件，以防止数据丢失。

```
rm filename.txt.swp
```

